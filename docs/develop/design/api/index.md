# API文档

!!! Note "一般说明"

    在阅读具体的API前，请先阅读本部分，了解文档中的格式。

## 展示格式说明

- API以"METHOD `path`"作为标题，其中METHOD为允许的请求方法，`path`为相对路径。
- 说明部分将会具体阐释该API的功能。
- 参数部分将会列出该API所需的参数。在本项目中，所有的HTTP请求的所有参数都是必需的，而WebSocket请求中允许一部分参数缺失，在API介绍中将会以 `?`表示可选参数。
- 返回部分将列出该API的成功/失败情况下的返回值。

## 返回体格式

!!! Note "若无特殊说明，返回体均为 `application/json`格式"

```json
{
  "code": JsonResponsecode,
  "info": info,
  "data": /* 其他字段 */
}
```

另外，由于成功请求的`code`字段一定为`0`，`info`字段一定为`Succeed`，故在展示成功请求的返回时，只展示其他字段。

## 通用异常返回值

为了节约篇幅，通用的异常返回值如下

| HTTP状态码 | 说明                                       |
| ---------- | ------------------------------------------ |
| 400        | 通用错误，具体错误由JsonResponse状态码决定 |
| 401        | 鉴权失败：用户未登陆                       |
| 405        | 请求方法不允许                             |
| 500        | 服务端其他内部错误                         |

## 鉴权认证

需要登陆的API会在介绍中有“需要登陆”的字样。由于本项目大部分API都需要用户登陆后才允许访问，故这里使用了 `django restframework`框架提供的鉴权方式，以便管理。
